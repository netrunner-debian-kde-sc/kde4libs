#!/usr/bin/make -f

UPSTREAMVERSION := $(shell dpkg-parsechangelog | grep '^Version: ' | sed 's/^Version: \(.*\)-.*/\1/')
RUNTIME_DEPS := kdebase-runtime (>= 4:4.0.66)

DEB_DBG_PACKAGE_kdelibs5 := kdelibs5-dbg
DEB_DBG_PACKAGE_kdelibs-bin := kdelibs5-dbg
DEB_DBG_PACKAGE_libphonon4 := kdelibs5-dbg

#bump version for every new upstream version!
DEB_DH_MAKESHLIBS_ARGS_kdelibs5 := -V'kdelibs5 (>= $(UPSTREAMVERSION)), $(RUNTIME_DEPS)'
DEB_DH_MAKESHLIBS_ARGS_libphonon4 := -V'libphonon4 (>= $(UPSTREAMVERSION))'

# remove the dependency on kdebase-runtime
DEB_DH_SHLIBDEPS_ARGS_ALL := -- -xkdebase-runtime

# Disable --as-needed. KDELibs is pretty clean now.
DEB_KDE_LINK_WITH_AS_NEEDED := no

include debian/cdbs/kde.mk

